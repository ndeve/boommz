{% extends "layout.html.twig" %}

{% block body %}

    {% if dayComics %}
        {% for page in dayComics.0.pages %}
            <section class="page">
                <h2 class="title is-size-3">La BD du jour d'aujourd'hui !</h2>

                <div class="columns is-multiline">

                    {% for box in page.boxes|slice(0, 3) %}
                        <div class="column is-{{ box.size ?? 'one-quarter' }} {{ cycle(['c-1', 'c-2', ''], loop.index0) }} h-{{ box.height }}">
                            <div {% if box.background %}style="background-image: url({{ box.background }})"{% endif %}
                                 class="ccolumn">
                                {% for bubble in box.bubbles %}
                                    <blockquote
                                            class="{{ bubble.classes }} b-{{ loop.index0 }}"
                                            style="{{ bubble.x ? 'botttom:' ~ bubble.y ~ 'px;' : '' }}{{ bubble.y ? 'left:' ~ bubble.x ~ 'px' : '' }}">
                                        {{ bubble.text }}
                                        {% if bubble.persona %}
                                            <footer><img src="{{ bubble.persona.url }}"
                                                         alt="{{ bubble.persona.name }}"/></footer>
                                        {% endif %}
                                    </blockquote>
                                {% endfor %}
                                {% if page.boxes|length > 3 and loop.index == 3 %}
                                    <a href="{{ url('comic', dayComics.0.routeParams) }}" class="more">
                                        {% include "svg/more.html.twig" %}
                                    </a>
                                {% endif %}
                            </div>
                        </div>
                    {% endfor %}
                </div>
            </section>
            <section class="author">
                {% include "comic/block_infos.html.twig" with {'comic': dayComics.0, 'isDayComic': 1} %}
            </section>
        {% endfor %}

        <hr />

        <h2 class="title is-size-4 title-gold">Les BDs du jour précédentes</h2>
        <section class="page comics">
            <div class="columns is-multiline">
                {% for comic in dayComics|slice(1, 3) %}
                    {% include "comic/block.html.twig" with {'displayAuthor': 1, 'color': cycle(['odd', ''], loop.index0)} %}
                {% endfor %}
            </div>
        </section>
    {% endif %}

    <hr />

    <h2 class="title is-size-4 title-green">Les dernières BDs</h2>
    <section class="page comics">
        <div class="columns is-multiline">
            {% for comic in lastComics %}
                {% include "comic/block.html.twig" with {'displayAuthor': 1, 'small': 1, 'color': cycle(['odd', ''], loop.index0)} %}
            {% endfor %}
        </div>
    </section>

{% endblock body %}
